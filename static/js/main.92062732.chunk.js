(this.webpackJsonpnotification=this.webpackJsonpnotification||[]).push([[0],{13:function(e,t,a){e.exports=a(33)},18:function(e,t,a){},19:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},20:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(6),r=a.n(c),i=(a(18),a(19),a(20),a(2)),o=a(7),l=a(8),m=a(12),u=a(9),h=a(3),g=a(11),d=a(10),b=a.n(d),f={PUBNUB:{publishKey:"pub-c-bea40ce9-2179-4866-8140-fa8942c4ef4f",subscribeKey:"sub-c-7e9caa68-f1bd-11e9-bdee-36080f78eb20"}},p=(Object.keys(f),function(){var e=f["PUBNUB"]||{},t=new b.a({publishKey:e.publishKey,subscribeKey:e.subscribeKey});return{init:function(e){t.init(e)},subscribe:function(e){return t.subscribe({channels:[e],withPresence:!0})},getStatus:function(e){return function(a){console.log(a),t.publish({message:"hello world from react",channel:e})}},getMessage:function(e,a){return t.getMessage(e,(function(e){a(e.message)}))},publish:function(e,a){return t.publish({message:e,channel:a})},unsubscribe:function(e){return t.unsubscribe({channels:[e]})}}}),v=function(e){return p(e)},w=(a(32),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).sendMessage=function(){var e=a.state,t=e.chats,n=e.userName,s=e.message;if(s.trim()){var c=[{timestamp:new Date-0,sender:n,message:s}];a.service.publish({random:a.senderRandom,sender:n,text:s},a.state.channelName),a.setState({chats:[].concat(Object(i.a)(t),c),message:""}),window.localStorage.setItem("_chats",JSON.stringify([].concat(Object(i.a)(t),c)));var r=a.refs["chat-holder"];r.scroll(0,r.scrollHeight)}},a.setUsername=function(e){a.setState({userName:a.state.name}),window.localStorage.setItem("__user_name",a.state.name)},a.nameChange=function(e){var t=e.target;a.setState({name:t.value})},a.setMessage=function(e){a.setState({message:e.target.value})},a.messageInputKeyUp=function(e){13===e.keyCode&&a.sendMessage()},a.state={name:"",userName:window.localStorage.getItem("__user_name"),channelName:window.localStorage.getItem("channel_name"),chats:window.localStorage.getItem("_chats")&&JSON.parse(window.localStorage.getItem("_chats"))||[],message:""},a.service=v(),a.service.init(Object(h.a)(a)),a.senderRandom=(new Date-Math.random()).toString(36),a}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("channel_name");if(t)this.service.subscribe(t),this.service.getMessage(t,(function(t){if(e.senderRandom!==t.random){var a=[{timestamp:new Date-0,sender:t.sender,message:t.text}],n=e.state.chats;e.setState({chats:[].concat(Object(i.a)(n),a),message:""}),window.localStorage.setItem("_chats",JSON.stringify([].concat(Object(i.a)(n),a)))}}));else{var a=prompt("Enter channel name");a&&window.localStorage.setItem("channel_name",a),window.location.reload()}}},{key:"componentWillUnmount",value:function(){this.service.unsubscribe(this.state.channelName)}},{key:"render",value:function(){var e=this,t=this.state,a=t.chats;return t.userName?s.a.createElement("div",{className:"chat-body"},s.a.createElement("div",{className:"chat-message-container",ref:"chat-holder"},a&&a.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("div",{className:t.sender===e.state.userName?"message right":"message left"},t.message))}))),s.a.createElement("div",{className:"chat-inputs"},s.a.createElement("input",{onKeyUp:this.messageInputKeyUp,className:"input-text",type:"text",value:this.state.message,placeholder:"Type your message",onChange:this.setMessage}),s.a.createElement("input",{className:"input-button",type:"button",value:"Send",onClick:this.sendMessage}))):s.a.createElement("div",null,s.a.createElement("label",{text:"Your Name?"}),s.a.createElement("input",{className:"input-text",type:"text",placeholder:"Enter your name",onChange:this.nameChange}),s.a.createElement("input",{className:"input-button",type:"button",value:"Submit",onClick:this.setUsername}))}}]),t}(n.Component));var y=function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"header"},s.a.createElement("a",{href:"#",className:"logo"},"Ria Chat"),s.a.createElement("div",{class:"header-right"},s.a.createElement("a",{class:"active",href:"#"},"10-11-12"))),s.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.92062732.chunk.js.map
